"use strict";function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,s){for(var t=0;t<s.length;t++){var i=s[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(s,t,i){return t&&e(s.prototype,t),i&&e(s,i),s}}();require("skatejs/src/skate"),skate("js-slideshow",{attached:function(e){new Slideshow($(e))},type:skate.type.CLASSNAME});var Slideshow=function(){function e(s){_classCallCheck(this,e),this.$el=s,this.slidesSelector=this.$el.data("slideshow-slides"),this.$slides=this.$el.find(this.slidesSelector),this.navSelector=this.$el.data("slideshow-nav"),this.$nav=$(this.navSelector),this.nextSelector=this.$el.data("slideshow-next"),this.$next=this.$el.find(this.nextSelector),this.prevSelector=this.$el.data("slideshow-prev"),this.$prev=this.$el.find(this.prevSelector),jQuery.event.special.swipe.settings.threshold=.1,this.bind().init()}return _createClass(e,[{key:"bind",value:function(){return this.$nav.on("click.slideshow","a",$.proxy(this.onClickNavItem,this)),this.$next.on("click.slideshow",$.proxy(this.onNext,this)),this.$prev.on("click.slideshow",$.proxy(this.onPrev,this)),this.$el.on("swipeleft",$.proxy(this.onNext,this)),this.$el.on("swiperight",$.proxy(this.onPrev,this)),this.$el.on("mousedown",$.proxy(this.onMouseDown,this)),this.$el.on("mouseup",$.proxy(this.onMouseUp,this)),this}},{key:"init",value:function(){var e=this.getCurrentIdx();return isNaN(e)?this.to(0):this.to(e),this}},{key:"getCurrentIdx",value:function(){return parseInt(this.$el.data("slideshow-current-idx"),10)}},{key:"onClickNavItem",value:function(e){var s=$(e.currentTarget),t=this.$nav.find("a").index(s);this.to(t),e.preventDefault()}},{key:"onNext",value:function(e){var s=this.getCurrentIdx()+1;s>this.$slides.length-1&&(s=0),this.to(s),e.preventDefault()}},{key:"onMouseDown",value:function(e){this.$el.addClass("is-grabbing")}},{key:"onMouseUp",value:function(e){this.$el.removeClass("is-grabbing")}},{key:"onPrev",value:function(e){var s=this.getCurrentIdx()-1;0>s&&(s=this.$slides.length-1),this.to(s),e.preventDefault()}},{key:"to",value:function(e){var s=this;this.$nav.find("a").removeClass("is-current"),this.$nav.find("a").eq(e).addClass("is-current"),this.$slides.removeClass("is-current is-next is-prev is-next-1 is-next-2 is-prev-1 is-prev-2"),this.$slides.each(function(t,i){var n=$(i);e===t?(n.addClass("is-current"),n.nextAll().addClass("is-next"),n.prevAll().addClass("is-prev")):e+1===t||e+1-s.$slides.length===t?n.addClass("is-next-1"):e+2===t||e+2-s.$slides.length===t?n.addClass("is-next-2"):e-1===t||e-1+s.$slides.length===t?n.addClass("is-prev-1"):(e-2===t||e-2+s.$slides.length===t)&&n.addClass("is-prev-2")}),this.$el.data("slideshow-current-idx",e)}}]),e}();exports["default"]=Slideshow,module.exports=exports["default"];